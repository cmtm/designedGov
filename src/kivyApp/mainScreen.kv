#:kivy 1.0

# TODO: describe file action popup

Main:
	name: 'main'
	
	TabbedPanel:
		tab_width: 200
		do_default_tab: False

		TabbedPanelItem:
			text: 'Connect to Host'

			GridLayout:
				cols: 2
				rows: 3
				spacing: 20
				padding: 20		

				# recent hosts. might change to "top" hosts and make a tree view
				Label:
					text: 'Recent : '
					size_hint_x: 0.3
				
				ButtonList:
					displays: [h.name for h in app.hosts]
					args: [h.name for h in app.hosts]
					callback: app.connectToHost

				Label:
					size_hint_x: 0.3
					text: 'Address : '

				# there is no button here, enter to connect
				AnchorLayout:
					anchor_x: 'center'
					anchor_y: 'center'
						
					TextInput:
						multiline: False
						size_hint: (0.6, None)
						height: 30

				BoxLayout:
					size_hint_x: 0.3
					
					# hacky blank label
					Label:
					
					Label:
						text: 'NFC\nor\nBluetooth'
						halign: 'center'
						pos_hint: {'center_x': 0.5}
					
					Label:
						text: ':'
						text_size: self.size
						halign: 'left'
						valign: 'middle'
					

				ButtonList:
					displays: ['None in range']
					args: [None]
					callback: lambda inst: inst




		TabbedPanelItem:
			text: 'Files'

			GridLayout:
				rows: 2
				cols: 2
				padding: 20
				spacing: 20

				Label:
					text: 'Download file : '
					size_hint: (0.3, 0.2)

				TextInput:
					multiline: False
					hint_text: 'Enter URL'
					size_hint_y: 0.2
					on_text_validate: app.wget(self.text)

				Label:
					text: 'Browse local : '
					size_hint_x: 0.3

				FileChooserListView:
					rootpath: self.path
			
		TabbedPanelItem:
			text: 'User Profile'

			BoxLayout:
				orientation: 'vertical'
				padding: 20
				spacing: 20
				
				# TODO: I'll want to eventually make a border around this
				BoxLayout:
					size_hint_y: 0.8
					
					BoxLayout:
						orientation: 'vertical'

						Label: 
							text: 'UserID: {}'.format(app.user.idNum)
						Label:
							text: 'Name: {}'.format(app.userInfo['name'])
						Label:
							text: 'Birth date: {}'.format(app.userInfo['birth'])
						Label:
							text: 'Sex: {}'.format(app.userInfo['sex'])
					
					Image:
						source: app.userInfo['image']
				
				BoxLayout:
					size_hint_y: None
					padding: 20
					spacing: 20
					
					Button:
						size_hint: (0.25, 0.4)
						text: 'View QR-code'
					
					Button:
						size_hint: (0.25, 0.4)
						text: 'change user'
					
					
						
							
						

